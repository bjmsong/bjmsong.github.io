---
layout:     post
title:      PageRank
subtitle:   
date:       2019-09-04
author:     bjmsong
header-img: img/Graph/kg.jpg
catalog: true
tags:
    - 图算法
---


### 引子
PageRank于1996年由谷歌创始人Page和Brin提出，是Google计算网页重要性的算法。这个算法当时使Google一举甩开了其它对手，而搜索引擎也从此成为人们获取信息最重要的渠道。

### PageRank的定义
#### 基本思想
互联网本质上是有向图，在其基础上定义随机游走模型，即一阶马尔科夫链，表示用户在互联网上随机浏览网页的过程。假设用户会等概率地跳到网页连接出去的网页，并且每次的跳转只和当前状态有关。在一定条件下，用户最终访问每个网页的概率会收敛到平稳分布，我们把这个值称为每个网页的PageRank值。显然，有更多的网页链接到的网页的PageRank值更高，网页的重要性也更大。

假设只有四个网页，它们之间的跳转关系如下图：

<ul> 
<li markdown="1"> 
![]({{site.baseurl}}/img/Graph/PageRank/pagerank.png) 
</li> 
</ul> 


我们可以得到转移矩阵：
<ul> 
<li markdown="1"> 
![]({{site.baseurl}}/img/Graph/PageRank/转移矩阵.png) 
</li> 
</ul> 


那么，随机游走模型在t时刻，t=1时刻的概率分布有如下关系：
$$R_{t+1}=MR_t$$

#### 理想情况
理想情况下，假设有向图是强连通（即从一个结点出发可以达到任意一个结点）且非周期的（不含有周期性结点），则存在平稳分布R，使得以下等式成立：
$$MR=R$$
这个平稳分布就是各结点的PageRank值。

#### 现实情况
理想是美好的，现实是残酷的。真实的互联网并不是理想的强联通图，大部分网页并没有超链接指向其它网页。
这时候，我们需要改变我们的随机游走模型，用户在任意一个网页上，可以有两种选择，一种是按照超接连等概率地跳转，另一种是完全随机跳转，以概率1/n（n是总的网页数量）跳转到任意的网页，这两个选择由概率d决定。这样，我们就定义了一个新的马尔科夫链，并且可以保证一定存在平稳分布。


### PageRank的计算
包括迭代算法、幂法、代数算法,常用算法是幂法。
#### 迭代算法
迭代计算转移矩阵，直至R收敛

$$R_{t+1}=dMR_t+\frac{1-d}{n}I  (1)$$

#### 幂法
通过计算转移矩阵的主特征值和主特征向量求得PageRank值。

#### 代数算法
代数求解一般转移矩阵（1）


### Topic-Sensitive PageRank
其实网页重要性并没有一个标准答案，不同用户心中重要的网页也是不一样的。但是为每个用户单独维护一份网页的重要性排名也不现实，因此一般搜索引擎会采用一种叫做Topic-Sensitive的折中方案。Topic-Sensitive PageRank的做法是预定义几个话题类别，例如体育、娱乐、科技等等，为每个话题单独维护一个向量，然后想办法关联用户的话题倾向，根据用户的话题倾向排序结果。
Topic-Sensitive PageRank分为以下几步：
#### 确定话题分类
#### 确定网页topic归属
具体归类有很多算法，例如可以使用TF-IDF基于词素归类，也可以聚类后人工归类。
#### 分topic向量计算

<ul> 
<li markdown="1"> 
![]({{site.baseurl}}/img/Graph/PageRank/分topic向量.png) 
</li> 
</ul> 


单位向量I变为了s。s是这样一个向量：对于某topic的s，如果网页k在此topic中，则s中第k个元素为1，否则为0。注意对于每一个topic都有一个不同的s。而
$$|s|$$
表示s中1的数量。

#### 确定用户topic倾向。
最后一步就是在用户提交搜索时，确定用户的topic倾向，以选择合适的rank向量。主要方法有两种，一种是列出所有topic让用户自己选择感兴趣的项目，这种方法在一些社交问答网站注册时经常使用；另外一种方法就是通过某种手段（如cookie跟踪）跟踪用户的行为，进行数据分析判断用户的倾向，


### 参考资料
1. 统计学习方法(第二版)
2. https://blog.codinglabs.org/articles/intro-to-pagerank.html