---
layout:     post
title:      侯捷C++八步曲
subtitle:   
date:       2022-11-09
author:     bjmsong
header-img: 
catalog: true
tags:
    - C++
---
## C++面向对象高级开发
### Ojbect Based：单一class的设计
- C：没有面向对象的特性，数据是全局的，所有函数都可以处理这些数据
- C++: class/struct,把数据和函数包在一起
- class
    - without pointer members
    - with poiter members
- 头文件
    - 头文件保护符
    - 前置声明
    - 类声明
    - 类定义
- class template
    - 数据类型不写死(用T表示),使用的时候来确定数据类型
- 函数模板
    - 调用时，编译器会自动进行实参推导（不需要指定类型）
- inline函数
    - 函数如果在class body内定义完成，就是inline函数
    - 最终由编译器决定，是不是真的inline
- 访问级别
    - public
    - private：不对外展示，比如数据
    - protected
- 构造函数
    - 创建对象的时候自动调用
    - 名称跟类名一样，没有返回类型
    - 推荐用initialization list：表示初始化，写在构造函数内部表示赋值
        - 只有构造函数有这个特性
    - 重载
        - 如果某些创建对象的场景下，不同的重载构造函数都能调用，这样的重载构造函数是不可以的
    - 一般是public
        - 如果不允许被外界创建对象，可以是private：例如单例模式

        ```C
        // Meyers Singleton
        class A {
        public:
            static A& getInstance();
            setup() {...}
        private:
            A();
            A(const A& rhs);
            ...
        }

        A& A::getInstance(){
            static A a;
            return a;
        }

        A::getInstance().setup();
        ```

    - explicit

- 常量成员函数

    ```C
    double real() const { return re; }
    ```

    - 不能修改成员变量
    - 该加const一定要加，设计函数的时候就要确定是否const

- 参数传递
    - pass by value
        - 把变量完整地复制过去，效率低
    - pass by reference：推荐使用
        - const：不修改参数
- 返回值传递
    - return by value
    - return by reference：推荐使用
        - 传递者不需要知道接收者以何种形式（by vaule or by reference）接收
        
        ```C
        complex& __doapl(complex* ths, const complex& r)
        {
            ...
            return *ths;
        }
        ```

        - const
        - 如果要返回函数内部创建的局部变量，不能使用引用，因为函数结束局部变量就销毁了
- 友元
    - 自由取得friend的private成员
    - 相同class的各个objects互为friends
- 操作符重载
    - 操作符就是一种函数，更直观
    - 可以定义为成员函数，也可以定义为非成员函数（全局函数）
    - 返回值是对象本身的类型：这样就可以连续使用操作符
- this指针
    - 所有的成员函数都（隐藏）带这个参数，不需要用户自己写
    - 指向调用的对象
- 临时对象
    - typename()
    - 生命周期只存在于当前行
- 拷贝构造
    - 如果类带指针，编译器默认提供的是浅拷贝（拷贝的是指针），需要自己写
- 拷贝赋值
    - 需要先检测是不是自我赋值
- 析构函数
    - 不带指针的类，大部分不需要析构函数
- stack，heap
    - stack
        - 存在于某作用域的一块内存空间。例如当调用函数，函数本身即会形成一个stack，用来放置它所接收的参数，以及返回地址。
        - stack object：其生命在作用域结束之际结束
        - static object：其生命在作用域结束之后仍然存在，直到整个程序结束
        - global object：其生命在整个程序结束之后才结束
    - heap
        - 操作系统提供的一块global内存空间
- new，delete
    - new：先分配memory(malloc)，再调用构造函数
    - delete: 先调用析构函数，再释放内存(free)
    - 动态分配所得的内存块
- static
    - 类内
        - 静态成员变量
            - 属于类，一个类一份，不属于对象
            - 需要在类外进行定义
        - 静态成员函数
            - 没有this指针，不能处理非静态成员变量，只能处理静态成员变量 
            - 可以通过object调用，也可以通过class name调用
- cout
    - 继承自ostream
    - 对<<进行操作符重载：适用于各种基本类型
- namespace
    - 用处：名字不会重名

### Object Oriented：多个class的设计
- 类与类之间的关系
    - 继承
    - 委托
    - 组合
- 

## 标准库--体系结构与内核分析
- The C++ Standard Library
https://www.mica.edu.vn/perso/Vu-Hai/EE3490/Ref/The%20C++Standard%20Library%20-%202nd%20Edition.pdf
### STL标准库与泛型编程
- 泛型编程（Generic Programming，GP）：使用template为主要工具来编写程序
- C++ Standard Library（C++标准库）
    - 编译器自带的，以头文件形式呈现
    - 头文件扩展名不带.h
    - C头文件
        - 新式：不带.h，建议使用
        - 旧式：带.h,仍然可用
    - 新式的头文件都封装在namespace std
    - 推荐把标准库所有的容器、算法都实践一遍
- STL（Standard Template Library，标准模板库）
    - 标准库的前身&主要构成
    - 泛型编程最成功的作品
    - 分为六大组件
        - 容器（Containers）：每个容器都有对应的头文件
        - 分配器(Allocators)：支持容器
        - 算法(Algorithms)：都是function template
        - 迭代器(Iterators)：泛化的指针，算法和容器之间的桥梁
        - 适配器(Adapters)：转换
        - 仿函数(Functors)
- 参考手册
    - https://cplusplus.com/
    - https://en.cppreference.com/w/
    - https://gcc.gnu.org/
- https://www.bilibili.com/video/BV1VG4y1z7pz/?spm_id_from=333.999.0.0&vd_source=7798c62f92ce545f56fd00d4daf55e26
- Sequence Container
    - Array: fixed number of elements
    - Vector: 可以自动扩容
    - Deque：双向队列，两端都可以自动扩容
    - List： 双向链表
    - Forward-List：单向链表
- Associative Container
    - set
        - multiset：元素可以重复
    - map：key-value
        - multimap：key可以重复
    - unordered vs ordered
        - unordered: HashTable实现
            - seperate chaining
        - ordered：红黑树实现


## C++设计模式

## C++ 11

## 资料
- 视频
    - youtube
    - 2015年录制
- 课件，代码
    - https://github.com/ZachL1/Bilibili-plus

## 其它
- https://www.zhihu.com/question/440479149
- https://mp.weixin.qq.com/s/nzFv_5TzLyhJOPCo_GGh1g
- https://github.com/tangtangcoding/C-C-
