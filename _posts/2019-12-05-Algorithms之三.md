---
layout:     post
title:      Algorithms之三
subtitle:   查找
date:       2019-12-05
author:     bjmsong
header-img: img/Algo/algorithms.jpg
catalog: true
tags:
    - 数据结构与算法
---
>本文将介绍查找算法，包括二叉查找树、平衡查找树和散列表。

### 符号表（字典，索引）

- 目的：将一个键和一个值联系起来

- 操作：插入，查找

- 键不允许重复

- 有序符号表：键有序

- 测试用例
    - 行为测试：小规模输入
    - 性能测试
    
- 各种实现的优缺点
  
    |                      | 优点                                               | 缺点                                                         |
    | -------------------- | -------------------------------------------------- | ------------------------------------------------------------ |
    | 链表（顺序查找）     | 适用于小型问题                                     | 对于大型符号表很慢                                           |
    | 有序数组（二分查找） | 最优的查找效率和空间需求，能够进行有序性相关的操作 | 插入操作很慢                                                 |
    | 二叉查找树（BST）    | 实现简单，能够进行有序性相关的操作                 | 没有性能上界的保证，链接需要额外的空间                       |
    | 2-3查找树（红黑树）  | 最优的查找和插入效率，能够进行有序性相关的操作     | 链接需要额外的空间                                           |
    | 散列表               | 能够快速地查找和插入常见类型的数据                 | 需要计算每种类型的数据的散列<br />无法进行有序性相关操作<br />链接和空结点需要额外的空间 |

|                        | 最坏情况 |      | 平均情况 |          | 是否有序 |
| ---------------------- | -------- | ---- | -------- | -------- | -------- |
|                        | 查找     | 插入 | 查找     | 插入     |          |
| 链表（顺序查找）       | N        | N    | N/2      | N        | 否       |
| 有序数组（二分查找）   | lgN      | N    | lgN      | N/2      | 是       |
| 二叉查找树（BST）      | N        | N    | 1.39lgN  | 1.39lgN  | 是       |
| 2-3查找树（红黑树）    | 2lgN     | 2lgN | 1.001lgN | 1.001lgN | 是       |
| 拉链法（链表数组）     | <lgN     | <lgN | N/2M     | N/M      | 否       |
| 线性探测法（并行数组） | clgN     | clgN | <1.5     | <2.5     | 否       |



### 二叉查找树(BST)

- **结合链表插入的灵活性和有序数组查找的高效性**
- 二叉查找树
    - 每个结点都只有左右两个链接（可以为空）
    - **每个结点的键都大于其左子树中的任意结点的键，小于右子树的任意结点的键**
- 定义一个私有类表示二叉树的一个结点（跟链表类似）
    - 一个键
    - 一个值
    - 一条左链接
    - 一条右链接
    - 一个结点计数器（以该结点为根节点的子树的结点总数）
- 性能
    - 树的高度决定了所有操作在最坏情况下的性能
    - 平均情况下: O(1.39lgN)
    - 最坏情况下：O(N) 
        - 键有序插入，非随机
    
    

### 平衡查找树

- 2-3查找树
    - 2-结点
        - 一个键
        - 两条链接
    - 3-结点
        - 两个键
        - 三条链接
            - 中链接的键位于两个键之间
    - 完美的2-3查找树的所有空链接到根节点的距离都是相同的
    - 操作不方便，需要处理的情况实在太多
- 红黑树（lean-left red black tree）
    - 将2-3树表示成二叉查找树
        - 红链接：将一个3-结点拆分成两个2-结点
    - 特点
        - 红链接均为左链接
        - 没有任何一个结点同时和两条红链接相连
        - 完美黑色平衡：任意空链接到根节点的路径上的黑链数量相同
    
    - 结合两个算法的优点：二叉查找树的查找方法，2-3树的插入方法
    - 插入的基本操作
        - 如果右子结点是红色而左子结点是黑色的，进行左旋转
        - 如果左子结点是红色且它的左子结点也是红色的，进行右旋转
        - 如果左右子结点都是红色，进行颜色转换
    - 性能
        - 大小为N的红黑树的高度不会超过2lgN
        - 插入和查询：lgN
    - B-树
        - 红黑树的实际应用，解决大量数据的搜索和插入问题
        - 每个结点可以至多有M-1个键，至少有M/2个键
            - 根节点至少有两个键
        - 应用
            - Windows ： NTFS
            - Mac：HFS
            - Database：Oracle，SQL，PostgreSQL
    - 红黑树的应用
        - Java：java.util.TreeMap, java.util.TreeSet
        - C++ STL: map, multimap, multiset
- Geometric Applications of BSTs：Intersections among geometric objects
    - 应用：CAD，games，movies，databases
    - 1d range search（一维区间搜索）
        - 搜索问题的基础 
        - 有序符号表的扩展
            - 新增API
                - range search ： find all keys between k1 and k2
                - range count ： number of keys between k1 and k2
        - 应用：数据库搜索
        - 实现：BST
            - range count ： rank(k2) - rank(k1)
            - 效率：lgN
    - line segment intersection 
    - kd trees
        - knn
    - interval search trees
    - rectangle intersection



### 散列表(哈希表)

- 只支持实现无序的符号表，有序操作不行
  
- 时间和空间上的trade-off

    - 如果没有内存限制：直接将键作为数组的索引
    - 如果没有时间限制：使用无序数组并进行顺序查找

- 常数级别的查找和插入操作效率

- 时间和空间上的权衡

- 散列的查找算法
    - step1：用散列函数将被查找的键转化为数组的一个索引
        - 多个键可能回散列到相同的索引值
    - step2：处理碰撞冲突，即处理两个或多个键的散列值相同的情况
        - 拉链法
        - 线性探测法
    
- 散列函数（hash function）
    - 易于计算并且能够均匀分布所有的键
    - 对于每种类型的键都需要一个与之对应的散列函数
    
- 拉链法
  
    - 数组的每个元素指向一条链表，链表中的每个结点都存储了散列值为该元素的索引的键值对
    
- 线性探测法
    - 数组长度大于键值对数量，依靠数组中的空位解决碰撞冲突
    - Insert：Put at table index i if free, if not try i+1,i+2,etc
    
- one-way hash function
    - "Hard" to find a key that will hash to a desired value (or two keys that hash to same value)
    
    - 缺点：生成代价昂贵
    - 特点
    
      - 信息相同，字符串也相同
    
      - 信息相似不会影响字符串相同
    
      - 可以生成无数的信息，但是字符串的种类是一定的，所以是不可逆的
    
    - 用途：文件校验，数字签名，储存密码
    
    - 算法：MD5，SHA
    



### 符号表的应用

- 散列表 vs 平衡查找树
    - 散列表代码简单，查找时间最优
    - 平衡查找树不需要设计散列函数，保证最坏情况下的性能，支持的操作更多，性能更有保障
- 集合
- 字典类
    - python字典:hash table
- 索引类
    - 一个键与多个值关联的符号表
    - 反向索引
        - 值来查找键
- 稀疏向量


