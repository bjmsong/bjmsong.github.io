---
layout:     post
title:      Hidden Technical Debt in Machine Learning Systems
subtitle:   
date:       2022-04-04
author:     bjmsong
header-img: img/machineLearning/machineLearning.png
catalog: true
tags:
    - 机器学习
---
google的经典论文，总结了机器学习系统中的技术债问题。这些问题通常会被忽视，但是在上线之后，这些问题会慢慢暴露，牵扯大量精力，甚至影响模型效果。要减少这类问题，需要多借鉴软件工程的成功经验：抽象、封装、测试、监控、设计模式、配置文件、权限控制、SLA。更重要的是，在项目刚开始，就要对技术债引起重视，而不要等问题出现了再去处理，这反而会引来更多的技术债。

## 什么是技术债
“技术债”这个词是Wrd Cunningham 1992年提出的，意思是软件工程由于快速开发而在之后引入的长期负担。

通常意义上的技术债是指我们在开发产品或者功能过程中，快速（往往伴随着混乱和各种限制）地在时间和资源受限的情况下完成正常情况下无法完成的工作时引入的技术问题。这些问题可能会导致将来引入新的功能变得很困难，或者开发出来的功能很快到达容量上的瓶颈。这种由于时间和资源受限的情况下不得不牺牲质量引入的技术债是最主要的一种技术债。

第二种技术债是因为开发团队未能事先进行合理的设计，导致架构混乱或者过度设计，从而引发在未来时刻爆发的技术问题。

第三种技术债是随着时间的推移，一个原本设计良好的架构不断叠加第一种技术债，导致代码是 case by case 堆叠起来的。老的 case 不敢删除，新的 case 不断增长，使得代码膨胀到一个无法控制的规模。

还有一种技术债是因为开发团队的能力和水平有限，写出来的代码质量低下，从而引发在未来时刻爆发的技术问题。

举例来说：

假设你在为一个SaaS产品做前端开发，你们的销售团队正在努力争取一个非常重要的大客户，如果不能把握住的话，将会使公司损失惨重。此时客户要求：只要能使用客户公司的品牌给你们的产品增加主题，他们就可以签署合同。可是你们的CSS架构在设计之初就不具备包含主题的功能，同时眼下也没有什么良好简洁的方式来给代码库快速增加主题功能。于是，你和公司商务部决定在两天内给产品强行植入一个主题。这种简单粗暴的方式，将会使你们的代码变得混乱且丑陋不堪。可是因为该客户实在太过重要，即使是CSS写得不太妥当，也只能暂且从权。 这就是我所说的技术债。

然后，类似的需求接踵而至，你不得不一而再再而三地植入新的主题。债务越积越深，而你却无力偿还。经历了相当长一段时间之后，代码会变得臃肿不堪且难以维护。最后你不得不把所有东西推倒重来。然而最痛苦的地方在于，此时你所付出的代价，比你在最开始就选择还债所付出的代价还要多。2天时间的应急方案，再加上5天时间做重构，也依然要比之后花好几周时间重写CSS代码耗时更少。你的技术债策略最终变成了一次大败亏输的经历。

其实不良代码原本可以避免。当初摆在你面前有两条路：正途亦或捷径。在明知道可以走正途的情况下，当初选择走捷径的你绝非一时糊涂。偿还债务的过程是一条艰难的自我救赎之路。

技术债自然会带来很多问题，但有它的优点，具体可以看[技术债：the good, the bad, and the tao](https://zhuanlan.zhihu.com/p/23765415)

可以通过重构代码，提升单元测试，删除不用的代码，减少依赖，简化API，优化文档等方法来还“技术债”。

## 机器学习系统中的技术债
### Complex Models Erode Boundaries：复杂模型侵蚀抽象边界
### Data Dependencies Cost More than Code Dependencies：数据依赖比代码依赖更加昂贵
### Feedback Loops：反馈回路
### ML-System Anti-Patterns：机器学习系统的反面模式
### Configuration Debt：配置债务 
### Dealing with Changes in the External World
### Other Areas of ML-related Debt



## 参考资料
《Hidden Technical Debt in Machine Learning Systems》
b站 花花酱 解说
https://www.zhihu.com/question/487541047/answer/2128942379
https://www.zhihu.com/question/424523708/answer/1511283545
https://zhuanlan.zhihu.com/p/111694069
https://blog.csdn.net/msbls5/article/details/54427879
https://www.cnblogs.com/yymn/articles/5071013.html

