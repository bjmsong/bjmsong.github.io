---
layout:     post
title:      用户画像（User Profile）
subtitle:   
date:       2020-03-07
author:     bjmsong
header-img: img/Recommendation System/th.jpg
catalog: true
tags:
    - 推荐系统
---

### 用户画像的定义

- 用户画像到底是什么
  - 是对用户信息的向量化表示，为什么不向量化表示不行呢？因为没办法交给计算机计算
  - 用户画像是给机器看的，而不是给人看的，越酷炫的用户画像越没什么用 。
- 用户画像的关键元素有哪些：维度、量化
- 用户画像是跟着使用效果走的，用户画像本身并不是目的

<ul> 
<li markdown="1"> 
用户画像是一个复杂的系统，随着产品逐渐成熟，会根据不同的业务场景设计不同的标签，用户画像要齐全
![]({{site.baseurl}}/img/Recommendation System/user profile.jpg) 
</li> 
</ul> 

- 构建方法
  - 查户口：直接使用原始数据作为用户画像的内容，如注册资料等人口统计学信息，或者购买历史，阅读历史等，除了数据清洗等工作，数据本身并没有做任何抽象和归纳
  - 堆数据：做统计工作，这是最常见的用户画像数据，常见的兴趣标签，就是这一类，就是从历史行为数据中去挖掘出标签，然后在标签维度上做数据统计，用统计结果作为量化结果

  - 机器学习：学习出人类无法直观理解的稠密向量。比如使用潜语义模型构建用户阅读兴趣，或者使用矩阵分解得到的隐因子，或者使用深度学习模型学习用户的 Embedding 向量。这一类用户画像数据通常不可解释，不能直接被人看懂。



### 构建流程

<ul> 
<li markdown="1"> 
![]({{site.baseurl}}/img/Recommendation System/构建流程.png) 
</li> 
</ul> 

- 数据收集
  - 数据收集大致分为网络行为数据、服务内行为数据、用户内容偏好数据、用户交易数据这四类。
    - 网络行为数据：活跃人数、页面浏览量、访问时长、激活率、外部触点、社交数据等
    - 服务内行为数据：浏览路径、页面停留时间、访问深度、唯一页面浏览次数等
    - 用户内容便好数据：浏览／收藏内容、评论内容、互动内容、生活形态偏好、品牌偏好等
    - 用户交易数据（交易类服务）：贡献率、客单价、连带率、回头率、流失率等
  - 当然，收集到的数据不会是100%准确的，都具有不确定性，这就需要在后面的阶段中建模来再判断，比如某用户在性别一栏填的男，但通过其行为偏好可判断其性别为“女”的概率为80%。
  - 还得一提的是，储存用户行为数据时最好同时储存发生该行为的场景，以便更好地进行数据分析。
- 统计分析
- 建模分析
  - 该阶段是处理收集到的数据，注重大概率事件，通过数学算法模型尽可能地排除用户的偶然行为，进行行为建模，抽象出用户的标签。
  - 这时也要用到机器学习预测用户的行为偏好。好比一个 y＝kx＋b 的算法，X 代表已知信息（即用户标签），Y 是用户偏好，通过不断的精确 k 和 b 来精确 Y。
  - 这个阶段，需要用到很多模型给用户贴标签。比如：
    - 用户汽车模型：根据用户对“汽车”话题的关注或购买相关产品的情况来判断用户是否有车、是否准备买车
    - 用户忠诚度模型：通过判断＋聚类算法判断用户的忠诚度
    - 身高体型模型：根据用户购买服装鞋帽等用品判断
    - 用户价值模型：判断用户对于网站的价值，对于提高用户留存率非常有用（电商网站一般使用RFM 实现）
    - 还有消费能力、违约概率、流失概率等等诸多模型
- 用户画像基本成型
  - 把用户的基本属性（年龄、性别、地域）、购买能力、行为特征、兴趣爱好、心理特征和社交网络等大致地标签化。
  - 为什么说是基本成型？因为用户画像永远也无法100％地描述一个人，只能做到不断地去逼近。因此，用户画像既应根据变化的基础数据不断修正，又要根据已知数据来抽象出新的标签使用户画像越来越立体。
  - 一般采用多级标签、多级分类进行“标签化”，比如第一级标签是基本信息（姓名、性别），第二级是消费习惯、用户行为；第一级分类有人口属性，人口属性又有基本信息、地理位置等二级分类，地理位置又分工作地址和家庭地址的三级分类。



### 标签体系

<ul> 
<li markdown="1"> 
![]({{site.baseurl}}/img/Recommendation System/标签体系2.png) 
</li> 
</ul> 

- 事实标签
  - 可以从数据库直接获取（如注册信息），或通过简单的统计得到。这类标签构建难度低、实际含义明确，且部分标签可用作后续标签挖掘的基础特征（如产品购买次数可用来作为用户购物偏好的输入特征数据）
  - 事实标签的构造过程，也是对数据加深理解的过程。对数据进行统计的同时，不仅完成了数据的处理与加工，也对数据的分布有了一定的了解，为高级标签的构造做好了准备。
- 模型标签
  - 标签体系的核心，也是用户画像工作量最大的部分，大多数用户标签的核心都是模型标签
  - 模型标签的构造大多需要用到机器学习和自然语言处理技术
- 高级标签
  - 基于事实标签和模型标签进行统计建模得出的，它的构造多与实际的业务指标紧密联系。只有完成基础标签的构建，才能够构造高级标签
  - 构建高级标签使用的模型，可以是简单的数据统计，也可以是复杂的机器学习模型。

<ul> 
<li markdown="1"> 
![]({{site.baseurl}}/img/Recommendation System/标签体系.png) 
</li> 
</ul> 



### 标签分类

<ul> 
<li markdown="1"> 
![]({{site.baseurl}}/img/Recommendation System/标签分类.png) 
</li> 
</ul> 

- 人口属性
  - 包括年龄、性别、学历、人生阶段、收入水平、消费水平、所属行业等
  - 比较稳定，一旦建立很长一段时间基本不用更新，标签体系也比较固定
  - 完整填写个人信息的用户只占很少一部分：在这种情况下，我们一般会用填写了信息的这部分用户作为样本，把用户的行为数据作为特征训练模型，对无标签的用户进行人口属性的预测。这种模型把用户的标签传给和他行为相似的用户，可以认为是对人群进行了标签扩散
- 兴趣属性
  - 这类标签随时间变化很快，标签有很强的时效性，标签体系也不固定
  - 是互联网领域使用最广泛的画像，互联网广告、个性化推荐、精准营销等各个领域最核心的标签都是兴趣标签
  - 兴趣画像主要是从用户海量行为日志中进行核心信息的抽取、标签化和统计，因此在构建用户兴趣画像之前需要先对用户有行为的内容进行内容建模
  - 为了保证兴趣画像既有一定的准确度又有较好的泛化性，我们会构建层次化的兴趣标签体系，使用中同时用几个粒度的标签去匹配，既保证了标签的准确性，又保证了标签的泛化性。
  - 步骤
    - 内容建模：分类-主题-关键词
      - 可以参考[搜狗信息流推荐算法](https://mp.weixin.qq.com/s?__biz=MzU1NTMyOTI4Mw==&mid=2247485411&idx=1&sn=3ac29da8b7a81869bd33679531e2cfe3&chksm=fbd4b58fcca33c998652a1e1a84b4dee7b825df919e1c68702938ee24728121617ac30f85878&mpshare=1&scene=1&srcid=10137y0qfdo7yfSR0VavHvEb#rd)
    - 兴趣衰减
- 地理属性
  - 一部分是常驻地画像；一部分是GPS画像。两类画像的差别很大，常驻地画像比较容易构造，且标签比较稳定，GPS画像需要实时更新



### 用户画像的评估

- 人口属性画像的相关指标比较容易评估，而兴趣画像的标签比较模糊，兴趣画像的人为评估比较困难，我们对于兴趣画像的常用评估方法是设计小流量的A/B-test进行验证
- 我们可以筛选一部分标签用户，给这部分用户进行和标签相关的推送，看标签用户对相关内容是否有更好的反馈
- 例如，在新闻推荐中，我们给用户构建了兴趣画像，我们从体育类兴趣用户中选取一小批用户，给他们推送体育类新闻，如果这批用户的点击率和阅读时长明显高于平均水平，就说明标签是有效的
- 用户画像的评估指标主要是指准确率、覆盖率、时效性等指标
  - 准确率：标签的准确率指的是被打上正确标签的用户比例，准确率是用户画像最核心的指标，一个准确率非常低的标签是没有应用价值的
  - 覆盖率：标签的覆盖率指的是被打上标签的用户占全量用户的比例，我们希望标签的覆盖率尽可能的高。但覆盖率和准确率是一对矛盾的指标，需要对二者进行权衡，一般的做法是在准确率符合一定标准的情况下，尽可能的提升覆盖率
  - 时效性



### 用户画像的使用

- 一般需要一个可视化平台，对标签进行查看和检索。画像的可视化一般使用饼图、柱状图等对标签的覆盖人数、覆盖比例等指标做形象的展示
- 还可以使用不同维度的标签，进行高级的组合分析，产出高质量的分析报告



### 参考资料

- https://blog.csdn.net/zw0Pi8G5C1x/article/details/83964888
- https://www.zhihu.com/question/19853605
- https://blog.csdn.net/zzhhoubin/article/details/79727130

