---
layout:     post
title:      计算芯片
subtitle:   
date:       2022-07-21
author:     bjmsong
header-img: 
catalog: true
tags:
    - 深度模型加速
---
## 入门课程
https://zhuanlan.zhihu.com/p/51791683/
https://inst.eecs.berkeley.edu/~ee290-2/sp21/

## 行业格局
https://basicmi.github.io/AI-Chip/
https://mp.weixin.qq.com/s/AuAnTdO0uEhqLmMxdX8iBg
https://mp.weixin.qq.com/s?__biz=MzI3MDQ2MjA3OA==&mid=2247485406&idx=1&sn=2b737c212e4e6cc25efd36c0c434bfce&chksm=ead1facfdda673d9fd9ff830023aec85dbd8191e2421b1e6a7b0f398c50ecc714af4b9977de4&scene=21#wechat_redirect
https://www.zhihu.com/question/285202403
- CPU
    - X86：Intel，amd，海光、兆芯
    - ARM：美满、富士通、英伟达、海思，亚马逊、谷歌、阿里
    - RISC-V：Intel，希姆计算、阿里
- GPGPU
    - 英伟达
- FPGA
    - 英特尔(Altera 阿尔特拉)
    - AMD(Xilinx 赛灵思)
- ASIC
    - 希姆计算、瀚博、燧原
    - 谷歌 TPU，百度昆仑芯片，亚马逊，字节跳动
- DPU
    - a compute entity that is used to move,process,secure and manage data, as it travels or while at rest, to make it available and optimized for application
    - Marvell 

## 评价标准
https://zhuanlan.zhihu.com/p/349414900
- 移动端(终端)：低功耗、低延迟、低成本
- 服务器端(云端): 高算力、扩展性、与现有基础设施的兼容性
    - 算力/性能: 芯片做浮点或定点数运算的时候，每秒的运算次数，峰值性能/平均性能
        - TFLOPS: 每秒浮点数计算次数
        - TOPS: 每秒整型数计算次数
        - https://www.zhihu.com/question/525205682/answer/2432690793
    - 灵活性：对不同场景的适应程度
    - 同构性：当大量部署这个AI芯片的时候，我们能否重复的利用现有的软硬件架构和资源，还是需要引入其他额外的东西
    - 成本：研发成本、部署和运维成本
    - 功耗
- CPU
    - 灵活性、同构性：5
    - 性能：1
    - 功耗：2
    - 成本：3
- GPU
    - 性能：4
    - 灵活性、同构性：3
    - 成本：2
    - 功耗：1
        - 几百瓦
        - 水冷散热
- ASIC
    - 性能、功耗：5
    - 同构性：2
    - 成本、灵活性：1
- FPGA
    - 功耗、同构性、成本、灵活性：4
    - 性能：3

## MLPerf
https://mlcommons.org/zh/
https://www.nvidia.cn/data-center/resources/mlperf-benchmarks/
- MLPerf是由来自学术界、研究实验室和相关行业的 AI 领导者组成的联盟，旨在“构建公平和有用的基准测试”，在规定的条件下，针对硬件、软件和服务的训练和推理性能提供公平的评估。为确保始终站在行业趋势的前沿，MLPerf不断演进，定期进行新的测试并添加代表AI领域当前水平的新工作负载
- MLPerf 训练由八个不同的工作负载组成，涵盖视觉、语言、推荐系统和增强学习等各种用例
- MLPerf 推理在七个不同种类的神经网络中测试七个不同的用例。其中三个用例针对计算机视觉，一个用例针对推荐系统，两个用例针对语言处理，还有一个用例针对医学影像。
- https://zhuanlan.zhihu.com/p/386280752
- https://github.com/mlcommons/training
- https://github.com/mlcommons/inference


## AI加速芯片
- AI的算力需求越来越大，但是CPU性能增长遇到瓶颈，通用型计算机的性能提升遇到瓶颈，因此需要AI芯片
- 主流方案
    - GPU
        - 计算单元众多，并行计算，浮点运算能力
        - 缺乏复杂的运算逻辑单元，需要CPU进行调度
        - 英伟达：完整的产业生态
        - 功耗、价格偏高 
    - FPGA：现场可编程逻辑阵列
        - 可以重复烧写
        - 适用于AI推理阶段
        - FPGA编程难度大，对开发者要求高
    - ASIC
        - google TPU：一张TPU顶几十张GPU
        - npu
        - 通用性差
    - 非冯诺依曼架构
        - 类脑芯片
- 高性能、低功耗、低成本、通用性
- 非GPU方案的挑战：能否量产，能否建立完整的生态
- 产业链
    - 上游：芯片设计
    - 中游：晶圆制造、封装测试
    - 下游：系统集成、应用（图像处理、互联网推广搜、自动驾驶、云计算、VR、AR、机器人等）
- 市面上AI芯片基本被分成了两类：
    - 云端AI芯片：部署在大型服务器中，可支持图像、语音等不同类别的AI 应用
    - 终端AI芯片：部署在自动驾驶、安防、零售、智能硬件等音设备中

## 听姚颂详解AI芯片技术与产业发展路径(2020)
https://www.bilibili.com/video/BV13T4y1E76K?is_story_h5=false&p=1&share_from=ugc&share_medium=android&share_plat=android&share_session_id=68d31763-b8a4-4228-82c2-65d4a02d6c31&share_source=WEIXIN&share_tag=s_i&timestamp=1661691739&unique_k=GMWAn9n
- ai+iot时代催生了大量需求
- 云端，边缘，终端
- ai芯片最重要解决的是带宽不足的问题
    - 超大的片上存储：高效但是奢侈
    - 微架构设计：减少访存次数
- 算法压缩
- ai芯片近几年的进步非常大：几ops可以量产了
    - 峰值算力 不等于 有效算力
- ai芯片没那么难：芯片越专用，设计难度越低
- ai芯片的需求千变万化，没有一颗芯片可以干完所有事情
- 生态与软件的重要性大于芯片本身
    - 英伟达：完整的解决方案
- 云端基本没有创业公司机会：投入极高，竞争激烈，需求没有想象得大
- 终端必须打透垂直行业


## 行业现状
https://mp.weixin.qq.com/s/kQ3XFzLd2IbweRqISeLUTw
- 进入泡沫期，进入洗牌时刻，加速呈现去AI化趋势
- 与其说是AI技术发展的果实，不如说是资本的产物
- AI芯片的软件复杂度的指数级提升
- 同质化严重，深陷价格战
- 供应链困难雪上加霜
- 量产真相：落地艰难
- 初创企业风险大，AI芯片第一股寒武纪只有200多亿市值
https://mp.weixin.qq.com/s/ovHiIQOUWo73h5zfuFgV7A
- 通用GPU：英伟达，amd, 壁仞，摩尔
https://mp.weixin.qq.com/s/jDw7GgVmrstkiGS6P6wzqQ
- ASIC
    - 寒武纪、燧原、瀚博、地平线、黑芝麻、比特大陆
    - 国内外互联网大厂
    https://mp.weixin.qq.com/s/SODBsHC5wahNwHZaiANo-g
    - 车企
- https://mp.weixin.qq.com/s/1-Hf2SeCvrDq74pJEJ7Q6Q
- AI 计算的下半场：软件定义算力
https://mp.weixin.qq.com/s/DtlapzV42i2GJIW-2X_caA
- 软件
    - 驱动，编译器，工具链，中间件，ai框架，算法，分布式
    - 衡量指标：算力利用率，开发效率，用户友好性，可移植性，生态兼容性
- https://www.sohu.com/a/168520925_114778
- https://zhuanlan.zhihu.com/p/31673006



## 参考资料
- https://zhuanlan.zhihu.com/p/382859622
- https://mp.weixin.qq.com/s/Op6gCUrZ44UjE5oMTePlzA
- https://mp.weixin.qq.com/s/IeDyAqXtdmMSXrXd8KLkhg
- https://www.zhihu.com/column/c_1058728091861602305
- https://mp.weixin.qq.com/s/P6lCkQ0iDuTBIFJUfhKTbw
- 公众号：技术大院
- b站：mc3dsky
- 会议：gtc, WAIC，ICCAD
