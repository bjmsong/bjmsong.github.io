---
layout:     post
title:      搭建python开发环境
subtitle:   
date:       2020-01-22
author:     bjmsong
header-img: img/python.jpg
catalog: true
tags:
    - python

---



## 类、包、模块

- 类：class
- 模块：一个.py文件，module_name就是这个文件去掉.py之后的文件名，文件中可以直接定义一些变量、函数、类
- 包：一个包含__init__.py和一系列.py文件的文件夹，包的作用有三个：
    - 将相同功能的代码整合到一起，使代码结构更清晰
    - 把模块划分到不同的名称空间之中，这样可以编写多个名称相同的模块
    - 为外部使用者提供严谨而稳固的API，保证它们不会随着版本的变动而变动。把外界可见的名称，列在名为__all__的特征属性里



## 导入包

- python寻找模块的优先级
    - 当前文件目录
    - 环境变量PYTHONPATH
    - sys.path(list 类型)



## 安装包

- [python有一个强大的中央仓库](https://pypi.org/)，为了安装其中的包，需要使用命令行工具pip。安装命令很简单：
    
    ```
    python2：pip install package_name
    python3：pip3 install package_name
    ```
    
    升级：
    
    ```
    pip install package_name upgrade
    ```
    
- 服务器多用户场景，权限

    - sudo pip install package_name --user

- 也可以使用setuptools：setuptools管理Python的第三方包，将包安装到site-package下，安装的包后缀一般为.egg，实际为ZIP格式。默认从 http://pypi.python.org/pypi 下载包，能够解决Python包的依赖关系；安装了setuptools之后即可用 easy_install 命令安装包，有多种安装方式可以选择



## 构建虚拟python环境

- 场景

  - 不同项目包依赖不同
  - 同一份代码需要在不同机器上运行

- pyvenv

  - python3.4开始，默认安装在电脑中

  - 新建名为myproject的虚拟环境

    ```
    pyvenv /tmp/myproject
    ```

  - 启用虚拟环境

    ```
    cd /tmp/myproject
    source bin/activate
    ```

  - 这时候命令行中的python，已经不再指向整个系统中的python命令，而是会指向虚拟环境目录中的那个python命令

    ```
    which python
    ```

  - 可以愉快地在虚拟环境中安装包了，不会跟系统环境冲突

  - 返回默认系统

    ```
    deactivate
    ```

  - 如果想要把这套虚拟环境复制到其它地方，可以使用

    ```
    pip freeze > requirement.txt
    ```

    把开发环境对软件包的依赖关系，明确地保存到文件之中

  - 当我们进入新的环境，可以先用pyvenv创建虚拟环境，然后使用下面的命令把相关的依赖都复制过来

    ```
    pip install -r /tmp/myproject/requirement.txt
    ```

- 如果使用python3.4之前的版本，要使用virtualenv

- 容器？



## 远程调试
- pycharm
https://zhuanlan.zhihu.com/p/36843200
- vscode
- pdb,ipdb
- vim
https://zhuanlan.zhihu.com/p/30022074
https://zhuanlan.zhihu.com/p/39008816
- pysnooper
https://zhuanlan.zhihu.com/p/63397849



## 参考资料

- 《effective python》

  